{% extends 'base.html' %}
{% block content %}

<div class="card shadow-sm p-4">
<h4 class="custom-header">–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –∑–∞—è–≤–∫–∏ (–í –ø—Ä–æ—Ü–µ—Å –Ω–∞ —Ä–∞–±–æ—Ç–∞)</h4>

    <form method="get" class="mb-3">
     <label for="executor" class="form-label">–ò–∑–±–µ—Ä–µ—Ç–µ –∏–∑–ø—ä–ª–Ω–∏—Ç–µ–ª:</label>
     <select name="executor" id="executor" class="form-select" onchange="this.form.submit()">
       <option value="all" {% if selected_executor == 'all' %}selected{% endif %}>–í—Å–∏—á–∫–∏</option>
       {% for user in executors %}
         <option value="{{ user.id }}" {% if selected_executor == user.id|stringformat:"s" %}selected{% endif %}>
           {{ user.get_full_name|default:user.username }}
         </option>
       {% endfor %}
     </select>
    </form>

    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>–ó–∞—è–≤–∫–∞ ‚Ññ</th>
          <th>–ö–ª–∏–µ–Ω—Ç</th>
          <th>–ï–ò–ö</th>
          <th>–î–æ–≥–æ–≤–æ—Ä ‚Ññ</th>
          <th>–í–∏–¥ –¥–æ–∫—É–º–µ–Ω—Ç</th>
          <th>–ò–∑–ø—ä–ª–Ω–∏—Ç–µ–ª</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for req in requests %}
          <tr>
            <td>{{ req.request_number }}</td>
            <td>{{ req.client.name }}</td>
            <td>{{ req.client.eik }}</td>
            <td>{{ req.loan_agreement.contract_number }}</td>
            <td>{{ req.get_document_type_display }}</td>
            <td>{{ req.maker.get_full_name|default:req.maker.username }}</td>
            <td><a href="{% url 'requests:request_detail' req.pk %}" class="btn btn-sm btn-outline-primary">üîç –ü—Ä–µ–≥–ª–µ–¥</a></td>
          </tr>
        {% empty %}
          <tr><td colspan="6">–ù—è–º–∞ –∑–∞—è–≤–∫–∏.</td></tr>
        {% endfor %}
      </tbody>
    </table>
</div>

{% endblock %}
