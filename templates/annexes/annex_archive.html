{% extends 'base.html' %}

{% block content %}
<div class="container">
  <div class="card shadow-sm p-4">
    <h4 class="custom-header">–ê—Ä—Ö–∏–≤ –Ω–∞ –∏–∑–≥–æ—Ç–≤–µ–Ω–∏—Ç–µ –∞–Ω–µ–∫—Å–∏</h4>

    <form method="get" class="row g-2 mb-4">
      <div class="col-md-2">
        <input type="text" name="request_number" value="{{ filters.request_number }}" class="form-control" placeholder="–ó–∞—è–≤–∫–∞ ‚Ññ">
      </div>
      <div class="col-md-2">
        <input type="text" name="eik" value="{{ filters.eik }}" class="form-control" placeholder="–ï–ò–ö">
      </div>
      <div class="col-md-2">
        <input type="text" name="contract_number" value="{{ filters.contract_number }}" class="form-control" placeholder="–î–æ–≥–æ–≤–æ—Ä ‚Ññ">
      </div>


      <div class="col-md-12 text-end mt-2">
        <button type="submit" class="btn btn-primary">–§–∏–ª—Ç—Ä–∏—Ä–∞–π</button>
        <a href="{% url 'annexes:annex_archive' %}" class="btn btn-secondary">–ò–∑—á–∏—Å—Ç–∏</a>
      </div>
    </form>

    <table class="table table-bordered table-hover">
      <thead class="table-light">
        <tr>
          <th>–ó–∞—è–≤–∫–∞ ‚Ññ</th>
          <th>–ö–ª–∏–µ–Ω—Ç</th>
          <th>–ï–ò–ö</th>
          <th>–î–æ–≥–æ–≤–æ—Ä ‚Ññ</th>
          <th>–ê–Ω–µ–∫—Å ‚Ññ</th>
          <th>–î–∞—Ç–∞ –Ω–∞ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ</th>
          <th>–ò–∑–ø—ä–ª–Ω–∏—Ç–µ–ª</th>
          <th>–õ–∏–Ω–∫</th>
        </tr>
      </thead>
      <tbody>
        {% for annex in annexes %}
        <tr>
          <td>{{ annex.request.request_number }}</td>
          <td>{{ annex.request.client.name }}</td>
          <td>{{ annex.request.client.eik }}</td>
          <td>{{ annex.request.loan_agreement.contract_number }}</td>
          <td>{{ annex.annex_number }}</td>
          <td>{{ annex.created_at|date:"d.m.Y" }}</td>
          <td>{{ annex.request.maker.get_full_name|default:annex.request.maker.username }}</td>
          <td>
            <a href="{{ annex.file_path.url }}" target="_blank" class="btn btn-sm btn-outline-primary">–ü—Ä–µ–≥–ª–µ–¥</a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="8" class="text-center">–ù—è–º–∞ –∞–Ω–µ–∫—Å–∏ –ø–æ –∑–∞–¥–∞–¥–µ–Ω–∏—Ç–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    {% include "pagination.html" with page_obj=page_obj %}

{#    <div class="text-end mt-3">#}
{#      <a href="{% url 'annexes:annexes_export_excel' %}?{{ request.GET.urlencode }}" class="btn btn-success">üì§ –ï–∫—Å–ø–æ—Ä—Ç –≤ Excel</a>#}
{#    </div>#}
  </div>
</div>
{% endblock %}
