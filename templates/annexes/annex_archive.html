{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="card shadow-sm p-4">
  <div class="card shadow-sm p-4">
    <h4 class="custom-header">–†–µ–≥–∏—Å—Ç—ä—Ä –Ω–∞ –∏–∑–≥–æ—Ç–≤–µ–Ω–∏—Ç–µ –∞–Ω–µ–∫—Å–∏</h4>

      {% include 'pagination_control.html' %}

    <form method="get" class="d-flex flex-wrap align-items-end gap-2 mb-4">
      <input type="text" name="request_number" value="{{ filters.request_number }}" class="form-control w-auto" placeholder="–ó–∞—è–≤–∫–∞ ‚Ññ">
      <input type="text" name="eik" value="{{ filters.eik }}" class="form-control w-auto" placeholder="–ï–ò–ö">
      <input type="text" name="contract_number" value="{{ filters.contract_number }}" class="form-control w-auto" placeholder="–î–æ–≥–æ–≤–æ—Ä ‚Ññ">

      <button type="submit" class="btn btn-outline-primary">üîç –¢—ä—Ä—Å–∏</button>
      <a href="{% url 'annexes:annex_archive' %}" class="btn btn-outline-danger">‚úñ –ò–∑—á–∏—Å—Ç–∏</a>
    </form>

    <table class="table table-striped">
      <thead>
        <tr>
          <th>–ó–∞—è–≤–∫–∞ ‚Ññ</th>
          <th>–ö–ª–∏–µ–Ω—Ç</th>
          <th>–ï–ò–ö</th>
          <th>–î–æ–≥–æ–≤–æ—Ä ‚Ññ</th>
          <th>–ê–Ω–µ–∫—Å ‚Ññ</th>
          <th>–î–∞—Ç–∞ –Ω–∞ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ</th>
          <th>–ò–∑–ø—ä–ª–Ω–∏—Ç–µ–ª</th>
          <th>–õ–∏–Ω–∫</th>
        </tr>
      </thead>
      <tbody>
        {% for annex in annexes %}
        <tr>
          <td>{{ annex.request.request_number }}</td>
          <td>{{ annex.request.client.name }}</td>
          <td>{{ annex.request.client.eik }}</td>
          <td>{{ annex.request.loan_agreement.contract_number }}</td>
          <td>{{ annex.annex_number }}</td>
          <td>{{ annex.created_at|date:"d.m.Y H:i" }}</td>
          <td>{{ annex.request.maker.get_full_name|default:annex.request.maker.username }}</td>
          <td>
            <a href="{{ annex.file_path.url }}" target="_blank" class="btn btn-outline-primary mb-2">–ü—Ä–µ–≥–ª–µ–¥</a>
            <a href="{% url 'api:send_annex' pk=annex.id %}" class="btn btn-outline-success mb-2">–ó–∞ –ø–æ–¥–ø–∏—Å</a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="8" class="text-center">–ù—è–º–∞ –∞–Ω–µ–∫—Å–∏ –ø–æ –∑–∞–¥–∞–¥–µ–Ω–∏—Ç–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <p>

    </p>
    {% include "pagination.html" with page_obj=page_obj %}

  </div>
</div>
{% endblock %}
